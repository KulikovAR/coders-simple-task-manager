# üö® –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è Telescope

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

Laravel Telescope –∑–∞–ø–æ–ª–Ω–∏–ª –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –±–æ–ª–µ–µ —á–µ–º –Ω–∞ 30–ì–ë –∑–∞–ø–∏—Å–µ–π, —á—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –∫:
- –ó–∞–≤–∏—Å–∞–Ω–∏—é –æ–ø–µ—Ä–∞—Ü–∏–π —É–¥–∞–ª–µ–Ω–∏—è
- –ù–µ—Ö–≤–∞—Ç–∫–µ –º–µ—Å—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –°–Ω–∏–∂–µ–Ω–∏—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üõ†Ô∏è –†–µ—à–µ–Ω–∏–µ

### 1. –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–ù–ï–ú–ï–î–õ–ï–ù–ù–û)

–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –º–µ—Å—Ç–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /path/to/your/project

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç–∫—Å—Ç—Ä–µ–Ω–Ω—É—é –æ—á–∏—Å—Ç–∫—É
./scripts/telescope-emergency-cleanup.sh
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
```bash
php artisan telescope:emergency-cleanup --keep-days=1 --batch-size=500 --force
```

### 2. –û–±—ã—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ü–æ—Å–ª–µ —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω—É—é –æ—á–∏—Å—Ç–∫—É:

```bash
# –û—á–∏—Å—Ç–∫–∞ –∑–∞–ø–∏—Å–µ–π —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π
php artisan telescope:cleanup --days=7 --batch-size=1000

# –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
php artisan telescope:cleanup --days=7 --dry-run
```

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –≤ `routes/console.php`:
- –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 02:00 - –æ—á–∏—Å—Ç–∫–∞ Telescope (–∑–∞–ø–∏—Å–∏ —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π)
- –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 02:30 - –æ—á–∏—Å—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤

–î–ª—è —Ä–∞–±–æ—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ cron:
```bash
* * * * * cd /path/to/project && php artisan schedule:run >> /dev/null 2>&1
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telescope

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–í —Ñ–∞–π–ª–µ `.env`:
```env
TELESCOPE_ENABLED=false
```

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ watchers

–í —Ñ–∞–π–ª–µ `config/telescope.php` –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ watchers:
```php
'watchers' => [
    Watchers\QueryWatcher::class => false,  // –û—Ç–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
    Watchers\ModelWatcher::class => false,  // –û—Ç–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
    Watchers\RequestWatcher::class => [
        'enabled' => env('TELESCOPE_REQUEST_WATCHER', false), // –û—Ç–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
    ],
    // –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ
    Watchers\ExceptionWatcher::class => true,
    Watchers\LogWatcher::class => [
        'enabled' => env('TELESCOPE_LOG_WATCHER', true),
        'level' => 'error', // –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
    ],
],
```

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–ø–∏—Å–µ–π

–í —Ñ–∞–π–ª–µ `app/Providers/TelescopeServiceProvider.php` —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è:
```php
Telescope::filter(function (IncomingEntry $entry) use ($isLocal) {
    return $isLocal ||
        $entry->isReportableException() ||
        $entry->isFailedRequest() ||
        $entry->isFailedJob() ||
        $entry->isScheduledTask() ||
        $entry->hasMonitoredTag();
});
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ç–∞–±–ª–∏—Ü

```sql
SELECT 
    table_name,
    ROUND(((data_length + index_length) / 1024 / 1024), 2) AS 'Size (MB)'
FROM information_schema.TABLES 
WHERE table_schema = 'your_database_name'
    AND table_name LIKE 'telescope_%'
ORDER BY (data_length + index_length) DESC;
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π

```bash
php artisan tinker --execute="
echo '–í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π: ' . DB::table('telescope_entries')->count() . PHP_EOL;
echo '–ó–∞–ø–∏—Å–µ–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π: ' . DB::table('telescope_entries')->where('created_at', '>=', now()->subDays(7))->count() . PHP_EOL;
"
```

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –æ—á–∏—Å—Ç–∫–∏

```bash
# –û–±—ã—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
php artisan telescope:cleanup --days=7

# –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
php artisan telescope:emergency-cleanup --keep-days=1

# –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
php artisan telescope:cleanup --dry-run
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥

- `--days=N` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π
- `--batch-size=N` - —Ä–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è (–º–µ–Ω—å—à–µ = –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ)
- `--dry-run` - –ø–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ –±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- `--force` - –≤—ã–ø–æ–ª–Ω–∏—Ç—å –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–í—Å–µ–≥–¥–∞ –¥–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é** –ø–µ—Ä–µ–¥ –º–∞—Å—Å–æ–≤—ã–º —É–¥–∞–ª–µ–Ω–∏–µ–º
2. **–ù–∞—á–Ω–∏—Ç–µ —Å —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –º–µ—Å—Ç–∞
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ—á–∏—Å—Ç–∫—É** –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã
4. **–†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ Telescope –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ** - –æ–Ω –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
5. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** —Ä–µ–≥—É–ª—è—Ä–Ω–æ

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
php artisan telescope:cleanup --dry-run

# –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–º–µ—Ä–∞ —Ç–∞–±–ª–∏—Ü
php artisan tinker --execute="
DB::table('telescope_entries')->selectRaw('COUNT(*) as count, DATE(created_at) as date')
    ->groupBy('date')
    ->orderBy('date', 'desc')
    ->limit(10)
    ->get()
    ->each(function(\$item) {
        echo \$item->date . ': ' . \$item->count . ' –∑–∞–ø–∏—Å–µ–π' . PHP_EOL;
    });
"
```

## üìà –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –ò–Ω–¥–µ–∫—Å—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —Ç–∞–±–ª–∏—Ü–µ `telescope_entries` –µ—Å—Ç—å –∏–Ω–¥–µ–∫—Å—ã:
- `created_at` - –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ –¥–∞—Ç–µ
- `type` - –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ç–∏–ø—É –∑–∞–ø–∏—Å–∏
- `batch_id` - –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –∑–∞–ø–∏—Å–µ–π

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MySQL

```ini
# –í my.cnf
innodb_buffer_pool_size = 1G
innodb_log_file_size = 256M
innodb_flush_log_at_trx_commit = 2
```

## üÜò –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç

1. **–í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ Telescope**:
   ```env
   TELESCOPE_ENABLED=false
   ```

2. **–£–¥–∞–ª–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—ã Telescope**:
   ```bash
   php artisan migrate:rollback --path=database/migrations/2025_07_20_141337_create_telescope_entries_table.php
   ```

3. **–ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—ã** (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã):
   ```bash
   php artisan migrate --path=database/migrations/2025_07_20_141337_create_telescope_entries_table.php
   ```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: `storage/logs/laravel.log`
2. –õ–æ–≥–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
3. –õ–æ–≥–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∏ CPU —Å–µ—Ä–≤–µ—Ä–∞
