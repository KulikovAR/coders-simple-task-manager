# Настройка автоматического деплоя

## Настройка GitHub Secrets

Для работы автоматического деплоя необходимо настроить следующие секреты в GitHub:

### 1. Перейдите в настройки репозитория
- Откройте ваш репозиторий на GitHub
- Перейдите в `Settings` → `Secrets and variables` → `Actions`

### 2. Добавьте следующие секреты:

#### `SERVER_HOST`
- IP адрес или доменное имя вашего сервера
- Например: `92.63.104.221` или `your-server.com`

#### `SERVER_USER`
- Имя пользователя для SSH подключения
- Например: `root`, `ubuntu`, `deploy`

#### `SERVER_PASSWORD`
- Пароль для SSH подключения к серверу
- ⚠️ **ВАЖНО**: Используйте сильный пароль!

## Настройка сервера

### 1. Убедитесь, что SSH доступен по паролю
На сервере проверьте файл `/etc/ssh/sshd_config`:
```bash
sudo nano /etc/ssh/sshd_config
```

Убедитесь, что включены:
```
PasswordAuthentication yes
PubkeyAuthentication yes
```

Затем перезапустите SSH:
```bash
sudo systemctl restart ssh
```

### 2. Создайте деплой скрипт
Убедитесь, что на сервере существует файл `~/deploy/379tm_deploy.sh` с правами на выполнение:

```bash
mkdir -p ~/deploy
chmod +x ~/deploy/379tm_deploy.sh
```

## Тестирование

После настройки секретов:
1. Сделайте коммит и пуш в ветку `main`
2. Проверьте вкладку `Actions` в GitHub репозитории
3. Убедитесь, что workflow выполнился успешно

## Безопасность

- ⚠️ **Используйте сильный пароль** для сервера
- Рассмотрите возможность использования SSH ключей вместо паролей
- Используйте отдельного пользователя для деплоя с ограниченными правами
- Регулярно меняйте пароли
