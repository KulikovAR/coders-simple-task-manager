# Тестирование интеграции DaData API

## Что было исправлено

### 1. **Проблема с отображением стран после сохранения**
- **Проблема**: После сохранения в базе данных хранился только код страны (например, "RU"), но не название
- **Решение**: Обновлен компонент `CountrySearchableSelect` для работы с объектами `{code, name}`

### 2. **Обратная совместимость**
- Компонент теперь поддерживает как новые объекты `{code, name}`, так и старые строковые коды
- При загрузке кода страны автоматически загружается название через DaData API

### 3. **Улучшенная логика отображения**
- При выборе страны сохраняется объект с кодом и названием
- При загрузке формы с кодом страны автоматически загружается название
- Отображается название страны в селекте

## Как тестировать

### 1. **Создание нового проекта**
1. Откройте форму создания проекта
2. Выберите поисковую систему (Google/Yandex)
3. В селекте "Регион" начните вводить название страны (например, "Рос")
4. Выберите страну из списка
5. Сохраните проект
6. Откройте проект для редактирования
7. Проверьте, что название страны отображается корректно

### 2. **Редактирование существующего проекта**
1. Откройте существующий проект для редактирования
2. Если в базе хранится только код страны, компонент автоматически загрузит название
3. Проверьте, что название отображается в селекте

### 3. **Проверка API**
```bash
# Получить популярные страны
curl -X GET http://localhost/api/dadata/countries/popular

# Поиск стран
curl -X POST http://localhost/api/dadata/countries/search \
  -H "Content-Type: application/json" \
  -d '{"query": "Рос"}'
```

## Формат данных

### Сохранение
```javascript
// Новый формат (рекомендуется)
regions: {
  google: { code: "RU", name: "Россия" },
  yandex: { code: "RU", name: "Россия" }
}

// Старый формат (поддерживается)
regions: {
  google: "RU",
  yandex: "RU"
}
```

### Отображение
- Компонент автоматически определяет формат данных
- Для строковых кодов загружает название через API
- Для объектов отображает сохраненное название
